package ca.client.assignment2;

import org.junit.Assert;
import org.junit.Test;

import java.awt.image.BufferedImage;

import static org.junit.Assert.*;

public class ImageUtilTest {

    @Test
    public void TestFromBase64() {
        String df = "iVBORw0KGgoAAAANSUhEUgAAABMAAAALCAYAAACd1bY6AAABQGlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSCwoyGFhYGDIzSspCnJ3UoiIjFJgf8rAxcDCIMwgzaCZmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsgsJYN1Z1+utKjQDPb49/B6vCimehTAlZJanAyk/wBxUnJBUQkDA2MCkK1cXlIAYrcA2SJFQEcB2TNA7HQIew2InQRhHwCrCQlyBrKvANkCyRmJKUD2EyBbJwlJPB2JDbUXBDicjY3cjC0NCTiVdFCSWlECop3zCyqLMtMzShQcgSGUquCZl6yno2BkYAS0EhTeENWfb4DDkVGMAyGWf5KBwZKdgYG5ASGWZMLAsN2BgUGiHSGmcpOBgX8nUFytILEoEe4Axm8sxWnGRhA293YGBtZp//9/DmdgYNdkYPh7/f//39v///+7DGj+LQaGA98AAQteC/BHemsAAABWZVhJZk1NACoAAAAIAAGHaQAEAAAAAQAAABoAAAAAAAOShgAHAAAAEgAAAESgAgAEAAAAAQAAABOgAwAEAAAAAQAAAAsAAAAAQVNDSUkAAABTY3JlZW5zaG90y/SSrwAAAdRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+MTE8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFhEaW1lbnNpb24+MTk8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpVc2VyQ29tbWVudD5TY3JlZW5zaG90PC9leGlmOlVzZXJDb21tZW50PgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KNgDlTwAAATNJREFUKBU1koERwyAMAzGXjbpJJ+rigf7LkDTFkYUsm9T389t7jLH5r1nDey0RrtmLGIQhWlXNJd7A4lUzuYc0dwsFMZZ0BFzuq/lUPmmXk01i1l4Asliuo1AEuHQEfmmajXhyvmgFA4RPrAajvVJ00R2x5FyKSu02hXSuw14RCqUGziDxrNUOFXLrTK8t5JzcKR6nwucJFu4azOzOua36Hg+SjXFalKauFVI4WKQpgFqMYMi0f6mkww4gpHS3kllmbl1hcnqZHd04Ty9F40wgSZDV5z2mnO4hq59NxqHTc7c5zcx8TjEVN9FXoN2ZuFqJXg7GVoIyiMOzgG1r5iFqGXa+OQRGc0pYxD2KOscF1w80CPiZZNePGFTn5s8TdBMhGPOwkMOIiJLmu03jIOa5PIQ/gbG3/o64/mkAAAAASUVORK5CYII=";
        BufferedImage image = ImageUtil.fromBase64(df);
        Assert.assertTrue(image.getHeight() != 0);
    }
    @Test
    public void TestFromBase64WithHeader() {
        String df = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAALCAYAAACd1bY6AAABQGlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSCwoyGFhYGDIzSspCnJ3UoiIjFJgf8rAxcDCIMwgzaCZmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsgsJYN1Z1+utKjQDPb49/B6vCimehTAlZJanAyk/wBxUnJBUQkDA2MCkK1cXlIAYrcA2SJFQEcB2TNA7HQIew2InQRhHwCrCQlyBrKvANkCyRmJKUD2EyBbJwlJPB2JDbUXBDicjY3cjC0NCTiVdFCSWlECop3zCyqLMtMzShQcgSGUquCZl6yno2BkYAS0EhTeENWfb4DDkVGMAyGWf5KBwZKdgYG5ASGWZMLAsN2BgUGiHSGmcpOBgX8nUFytILEoEe4Axm8sxWnGRhA293YGBtZp//9/DmdgYNdkYPh7/f//39v///+7DGj+LQaGA98AAQteC/BHemsAAABWZVhJZk1NACoAAAAIAAGHaQAEAAAAAQAAABoAAAAAAAOShgAHAAAAEgAAAESgAgAEAAAAAQAAABOgAwAEAAAAAQAAAAsAAAAAQVNDSUkAAABTY3JlZW5zaG90y/SSrwAAAdRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+MTE8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFhEaW1lbnNpb24+MTk8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpVc2VyQ29tbWVudD5TY3JlZW5zaG90PC9leGlmOlVzZXJDb21tZW50PgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KNgDlTwAAATNJREFUKBU1koERwyAMAzGXjbpJJ+rigf7LkDTFkYUsm9T389t7jLH5r1nDey0RrtmLGIQhWlXNJd7A4lUzuYc0dwsFMZZ0BFzuq/lUPmmXk01i1l4Asliuo1AEuHQEfmmajXhyvmgFA4RPrAajvVJ00R2x5FyKSu02hXSuw14RCqUGziDxrNUOFXLrTK8t5JzcKR6nwucJFu4azOzOua36Hg+SjXFalKauFVI4WKQpgFqMYMi0f6mkww4gpHS3kllmbl1hcnqZHd04Ty9F40wgSZDV5z2mnO4hq59NxqHTc7c5zcx8TjEVN9FXoN2ZuFqJXg7GVoIyiMOzgG1r5iFqGXa+OQRGc0pYxD2KOscF1w80CPiZZNePGFTn5s8TdBMhGPOwkMOIiJLmu03jIOa5PIQ/gbG3/o64/mkAAAAASUVORK5CYII=";
        BufferedImage image = ImageUtil.fromBase64(df);
        Assert.assertTrue(image.getHeight() != 0);
    }
//    @Test
//    public void testProperString(){
//        String badString = "hvswyswytTesss,jijsiqisqqmmoll";
//        String formatted = ImageUtil.getProperBaseData(badString);
//        Assert.assertEquals("jijsiqisqqmmoll", formatted);
//    }

    @Test
    public void saveImage() {
        String df = "iVBORw0KGgoAAAANSUhEUgAAABMAAAALCAYAAACd1bY6AAABQGlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSCwoyGFhYGDIzSspCnJ3UoiIjFJgf8rAxcDCIMwgzaCZmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsgsJYN1Z1+utKjQDPb49/B6vCimehTAlZJanAyk/wBxUnJBUQkDA2MCkK1cXlIAYrcA2SJFQEcB2TNA7HQIew2InQRhHwCrCQlyBrKvANkCyRmJKUD2EyBbJwlJPB2JDbUXBDicjY3cjC0NCTiVdFCSWlECop3zCyqLMtMzShQcgSGUquCZl6yno2BkYAS0EhTeENWfb4DDkVGMAyGWf5KBwZKdgYG5ASGWZMLAsN2BgUGiHSGmcpOBgX8nUFytILEoEe4Axm8sxWnGRhA293YGBtZp//9/DmdgYNdkYPh7/f//39v///+7DGj+LQaGA98AAQteC/BHemsAAABWZVhJZk1NACoAAAAIAAGHaQAEAAAAAQAAABoAAAAAAAOShgAHAAAAEgAAAESgAgAEAAAAAQAAABOgAwAEAAAAAQAAAAsAAAAAQVNDSUkAAABTY3JlZW5zaG90y/SSrwAAAdRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+MTE8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFhEaW1lbnNpb24+MTk8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpVc2VyQ29tbWVudD5TY3JlZW5zaG90PC9leGlmOlVzZXJDb21tZW50PgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KNgDlTwAAATNJREFUKBU1koERwyAMAzGXjbpJJ+rigf7LkDTFkYUsm9T389t7jLH5r1nDey0RrtmLGIQhWlXNJd7A4lUzuYc0dwsFMZZ0BFzuq/lUPmmXk01i1l4Asliuo1AEuHQEfmmajXhyvmgFA4RPrAajvVJ00R2x5FyKSu02hXSuw14RCqUGziDxrNUOFXLrTK8t5JzcKR6nwucJFu4azOzOua36Hg+SjXFalKauFVI4WKQpgFqMYMi0f6mkww4gpHS3kllmbl1hcnqZHd04Ty9F40wgSZDV5z2mnO4hq59NxqHTc7c5zcx8TjEVN9FXoN2ZuFqJXg7GVoIyiMOzgG1r5iFqGXa+OQRGc0pYxD2KOscF1w80CPiZZNePGFTn5s8TdBMhGPOwkMOIiJLmu03jIOa5PIQ/gbG3/o64/mkAAAAASUVORK5CYII=";
        BufferedImage image = ImageUtil.fromBase64(df);
        assertTrue(ImageUtil.saveImage(image, "test.png", "image"));
    }
}